exit
batch["reference"]
batch = JSON.parse response.body
batch[3]
batch
batch["response"]
batch = response.body
response
orders[0]
orders = response
exit
post'/batches', params: valid_params[:purchase_Channel]
Order.all
valid_params[:purchase_channel]
response.body
response
exit
exitf
attributes_for
pa
params: [[A@order[0].purchase_channel]clear
@order[0].purchase_channel
@order
exit
Batch.last if not_nil
exit
@orders
exit
@orders.sum(:total_value)
@orders[0]['total_value']
@orders
exit
status
exit
@batch.idexit
@batch = Batch.where(reference: params[:reference])
@batch
exit
Order.where(batch_id: params[:reference]ex)
params
@orders
exit
Date.today.strftime('%Y%m') + (batch_old.id+1).to_s
Date.today.strftime('%Y-%m')
Date.today
batch_old
exit
self.id
self
Batch.all.last
self
exit
@orders.len
exit
@orders.count
exit
@orders
exit
@batch.id
@orders[0].batch_id
exit
@orders[0].batch = @batch
exit
@orders[0].batch = @batch.id
@batch.id
@batch
@orders[0].batch.id = @batch.id
@batch
exit
@orders[0].batch
@orders
@batch
exit
Batch.create(batch_params)
@order.batch
@order
@order = Order.where(purchase_channel: params[:purchase_channel]).first
@order
@order.batch
batch_params
@batch
@orders
exit
@batch
batch_params
exit
batch_params
exit
batch_params[:purchase_channel]
batch_params
exit
invalid_params
exit
order = FactoryBot.attributes_for(:order)
FactoryBot
exit
response
exit
teste
teste = JSON.parse request.raw_post
request.raw_post
exit
request
request.raw_post
exit
request.raw_post
request[0]
exit
JSON.parse request.body.read
request.body.rewind
exit
teste
exit
request.body.read
JSON.parse(teste)
teste=request.body
teste = JSON.parse(request.body)
request.body.read
exit
teste = JSON.parse(request.body)
request.body.read
exit
request.body.read
request.body
request
request.body.read
